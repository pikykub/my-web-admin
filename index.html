<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö - PeachWeb</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --main-red: #ea334a; --success: #2ecc71; --error: #e74c3c; }
        body { font-family: 'Kanit', sans-serif; background-color: #fcfcfc; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        
        .card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); width: 100%; max-width: 350px; text-align: center; }
        h2 { color: var(--main-red); margin-bottom: 5px; font-size: 28px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .subtitle { color: #666; font-size: 14px; margin-bottom: 30px; }
        
        input { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; font-family: 'Kanit'; font-size: 15px; background: #fafafa; transition: 0.3s; }
        input:focus { outline: none; border-color: var(--main-red); background: white; box-shadow: 0 0 0 3px rgba(234, 51, 74, 0.1); }
        
        button { width: 100%; padding: 15px; background-color: var(--main-red); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 15px; transition: 0.3s; }
        button:hover { background-color: #d12b41; }
        button:disabled { background-color: #ff99a8; cursor: not-allowed; }
        
        /* ‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏´‡πâ‡∏Å‡∏î */
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .btn-emergency { animation: pulse-btn 1.5s infinite; background-color: var(--success) !important; font-size: 18px !important; }

        .link { margin-top: 25px; font-size: 14px; color: #666; }
        a { color: var(--main-red); text-decoration: none; font-weight: bold; }

        /* ‡∏õ‡πá‡∏≠‡∏õ‡∏≠‡∏±‡∏õ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô */
        #toast {
            visibility: hidden; min-width: 250px; background-color: white; color: #333; text-align: center; border-radius: 12px;
            padding: 16px 20px; position: fixed; z-index: 1000; left: 50%; top: -50px; transform: translateX(-50%);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15); font-weight: 600; opacity: 0; transition: opacity 0.4s, top 0.4s;
            display: flex; align-items: center; justify-content: center; gap: 10px; border-left: 6px solid;
        }
        #toast.show { visibility: visible; opacity: 1; top: 40px; }
    </style>
</head>
<body>

<div id="toast">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</div>

<div class="card">
    <h2>üçë PeachWeb</h2>
    <div class="subtitle">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
    
    <input type="email" id="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏• / Email">
    <input type="password" id="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô / Password">
    
    <button id="btnLogin">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    
    <div class="link">
        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="register.html">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBORnXLQdZnETh9AMFMUx50FlLylKCVc2w",
        authDomain: "web-rental-system-d8894.firebaseapp.com",
        projectId: "web-rental-system-d8894",
        storageBucket: "web-rental-system-d8894.firebasestorage.app",
        messagingSenderId: "389385259939",
        appId: "1:389385259939:web:5a8de35f4a06b906e66816"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    function showToast(message, type) {
        const toast = document.getElementById("toast");
        toast.innerText = message;
        if (type === "success") {
            toast.style.borderLeftColor = "var(--success)";
            toast.innerHTML = `‚úÖ ${message}`;
        } else {
            toast.style.borderLeftColor = "var(--error)";
            toast.innerHTML = `‚ùå ${message}`;
        }
        toast.classList.add("show");
        setTimeout(() => { toast.classList.remove("show"); }, 3000);
    }

    document.getElementById('btnLogin').addEventListener('click', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        const btn = document.getElementById('btnLogin');
        
        if(!email || !password) {
            showToast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô", "error");
            return;
        }

        btn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...";
        btn.disabled = true;
        btn.classList.remove("btn-emergency");

        try {
            await signInWithEmailAndPassword(auth, email, password);
            showToast("‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", "success");
            
            // üö® ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô üö®
            btn.innerText = "üëâ ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å üëà";
            btn.disabled = false; // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö
            btn.classList.add("btn-emergency"); // ‡πÉ‡∏™‡πà‡∏•‡∏π‡∏Å‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö
            
            // ‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ ‡∏à‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ index.html ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏ö‡∏ö 100%
            btn.onclick = () => {
                window.location.href = "index.html";
            };

            // ‡∏•‡∏≠‡∏á‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏ü‡∏•‡∏∏‡∏Ñ‡∏ï‡∏¥‡∏î
            setTimeout(() => {
                window.location.href = "index.html";
            }, 1000);

        } catch (error) {
            showToast("‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", "error");
            btn.innerText = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö";
            btn.disabled = false;
        }
    });
</script>
</body>
</html>
